# 18일차-220126

# 이전 강의내용 리뷰 (01/25)

네트워크 티밍
개념 - 물리적인 네트워크 인터페이스를 묶어서 대역폭 확장 / 부하분산 / 장애대응 등을 위해 사용

nmcli 등으로 설정 -> 가상의 인터페이스(팀인터페이스) 를 만들고 물리적인 인터페이스(포트)를 연결
러너를 설정해서 동작 방식 결정
: 브로드캐스트,라운드로빈, 로드밸런서, 액티브백업, LACP

SELinux
개념 : 리눅스 시스템을 안전하게 사용하기 위한 추가적인 방법
권산 / 방화벽 +@

설정 방식

- 동작모드	: 시스템 부팅 시 모듈의 실행 여부 / 혹은 실행 후 정책의 강제성 여부를 결정 (enforcing / permissive / disabled)
- 파일 컨텍스트: 각 파일에 대해 접근 가능한 프로세스를 지정
- 포트 컨텍스트: 네트워크 포트 번호 마다 프로토콜(서비스) 을 지정해서 허용여부를 결정
- 부울	: 컨텍스트에 더해 추가적인 제어를 위한 설정. 프로세스 기능 별로 제어

DNS

- 개념 : 네트워크 사용 시 IP 주소 대신 이름으로 된 주소를 사용할 수 있게 해주는 서비스

구성 순서

1. 패키지 설치	: bind
2. 서비스 설정	: /etc/named.conf, /var/named/XXXX
3. 서비스 활성화: named
4. 방화벽 설정	: dns
- > 추가 구성 : /etc/hosts, /etc/resolv.conf, 호스트네임

실습

1. 기본 구성 (Primary Only, 정방향 조회만)
2. 역방향조회 파일 작성 및 확인
3. Secondary Server 추가 구성 및 파일 전송 확인

DNS 조회 순서

1. /etc/hosts 파일 조회
2. /etc/resolv.conf 파일에 등록된 DNS 주소로 요청
3. 캐시서버 확인 (조회했던 기록만 남음)
4. 루트 도메인(.) 부터 재귀적 쿼리를 사용해서 주소 조회
5. 찾은 주소는 클라이언트에 알려주면서 동시에 캐시서버에 기록

---

# DCHP 서버

- 기능 : 시스템의 IP 주소를 동적으로 설정해주는 서비스
주소를 일정 기간 대여 (수동으로 설정하는 시스템이 공존하면 충돌이 발생할 수 있음)
DHCP 서버가 여러 대 있을 경우에도 충돌이 발생
사용자의 편의를 위해 사용 (시스템이 많을 경우)
- 대여 과정
    1. 클라이언트에서 DHCP 서버를 찾기 위해 전체 네트워크에 패킷 전송
    2. 서버가 응답할 때에 본인의 IP 주소와 함께 대여 가능한 IP 주소 알림
    3. 클라이언트가 서버에서 제공하려는 주소를 사용하겠다고 알림
    4. 서버가 허락하면서 관리풀에서 해당 IP를 사용 중으로 변경
- 단독 사용 시 IP 주소 할당용
- pxe 서버를 구성할 때에도 함께 사용
- ftp 서버를 구성할 때에도 함께 사용

---

# LDAP

- DAP (디렉토리 서비스) : 계층적인 구조를 구성해서 각종 정보를 공유해주는 서비스를 통칭
- LDAP : 사용자 관리 및 인증 서비스 등에 대한 서비스로만 구성한 경량화 버전
    - AD, OpenLdap, FreeIPA 등

### LDAP / IPA 서버 구성에 필요한것

1. DNS 서비스가 필요 ( 서버 구성 시 함께 구성할 수 있음 )
2. IP 주소 / 호스트네임 등이 정적으로 설정

### 서버 구성 후 클라이언트 연결 시

- 각각의 클라이언트에서 모두 동일한 사용자로 접속 가능 ( IPA 서버에서 설정한 사용자 )

### LDAP 실습

- 이전 실습에서 dns 설치를 했으므로 가상머신 초기화 후 진행 (혹은 OVA 파일 불러오기)
1. 패키지 설치
    - 설치 오류 해결을 위한 패키지 업데이트
        
        ```jsx
        yum update nss* -y
        ```
        
2. 호스트네임 / IP주소 정적인 설정
3. /etc/hosts 파일에 내 호스트네임과 IP 주소 세팅
4. ipa-server-install 명령어로 설치

---

## FTP 서버

### 개념

- 파일 전송 서버(서비스)
- 기본적으로 데이터 전송 시 평문으로 전송
- 보안을 위해 ssl / ssh 프로토콜 등과 함께 사용하기도 함

### 동작 모드

1. 액티브 모드
    1. 클라이언트가 서버로 요청
    2. 서버가 클라이언트에 연결
    -> 단점 : 클라이언트의 방화벽 / NAT 구성 등에 의해 연결이 제한
2. 패시브 모드
    1. 클라이언트가 서버로 요청
    2. 서버가 사용하는 데이터포트를 따로 알려줌
    3. 클라이언트가 서버의 데이터포트로 연결 시도
    -> 액티브모드의 단점을 보완 / 단점 : 서버에 추가적인 포트가 필요 (서버 보안에 취약)